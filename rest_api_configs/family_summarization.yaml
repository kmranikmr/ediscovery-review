components:
  cleaner:
    init_parameters:
      ascii_only: false
      keep_id: false
      remove_empty_lines: true
      remove_extra_whitespaces: true
      remove_regex: null
      remove_repeated_substrings: false
      remove_substrings: null
      unicode_normalization: null
    type: haystack.components.preprocessors.document_cleaner.DocumentCleaner
  generator:
    init_parameters:
      generation_kwargs:
        max_tokens: 2048
        temperature: 0.2
      keep_alive: null
      model: mistral
      raw: false
      streaming_callback: null
      system_prompt: null
      template: null
      timeout: 120
      url: http://localhost:11434
    type: haystack_integrations.components.generators.ollama.generator.OllamaGenerator
  prompt_builder:
    init_parameters:
      required_variables:
      - documents
      template: 'You are an expert email analyst. Summarize the following email and
        its attachments as a cohesive unit.

        Email and Attachments: {{documents}}

        Your summary must:

        - Clearly summarize the main email content.

        - Incorporate and highlight key information from all attachments.

        - Identify relationships between the email and its attachments.

        - Note any important decisions, action items, or discrepancies.

        Return the summary as a concise paragraph.

        Make the summary moderately detailed (3-5 sentences or 4-6 bullets, about
        80 words).'
      variables: null
    type: haystack.components.builders.prompt_builder.PromptBuilder
  splitter:
    init_parameters:
      extend_abbreviations: true
      language: en
      respect_sentence_boundary: false
      split_by: word
      split_length: 3000
      split_overlap: 300
      split_threshold: 0
      use_split_rules: true
    type: haystack.components.preprocessors.document_splitter.DocumentSplitter
connection_type_validation: true
connections:
- receiver: splitter.documents
  sender: cleaner.documents
- receiver: prompt_builder.documents
  sender: splitter.documents
- receiver: generator.prompt
  sender: prompt_builder.prompt
max_runs_per_component: 100
metadata: {}
